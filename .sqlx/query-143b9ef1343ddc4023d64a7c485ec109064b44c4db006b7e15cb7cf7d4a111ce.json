{
  "db_name": "PostgreSQL",
  "query": "\n            WITH ThemeDatas AS (\n                SELECT t.id, u.name, score \n                    FROM UNNEST($2::text[], $3::int[]) AS u(name, score)\n                    LEFT JOIN tb_theme AS t ON t.name = u.name\n            ),\n            InsertedThemes AS (\n                INSERT INTO tb_theme(name)\n                    SELECT name\n                    FROM ThemeDatas\n                    WHERE id IS NULL\n                RETURNING id, name\n            )\n            INSERT INTO tb_theme_meta(theme_id, metadata_id, score)\n                SELECT \n                    CASE \n                        WHEN id IS NULL THEN (SELECT id FROM InsertedThemes AS i WHERE i.name = t.name)\n                        ELSE id\n                    END, $1, score\n                FROM ThemeDatas AS t\n            RETURNING id\n            ",
  "describe": {
    "columns": [
      {
        "ordinal": 0,
        "name": "id",
        "type_info": "Int8"
      }
    ],
    "parameters": {
      "Left": [
        "Int8",
        "TextArray",
        "Int4Array"
      ]
    },
    "nullable": [
      false
    ]
  },
  "hash": "143b9ef1343ddc4023d64a7c485ec109064b44c4db006b7e15cb7cf7d4a111ce"
}
